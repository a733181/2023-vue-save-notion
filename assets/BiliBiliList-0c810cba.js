import{h as I,i as d,j as b,k as U,o as m,c as f,b as u,e as o,I as p,B as v,n as w,t as y,l as V,m as h}from"./index-d1730e52.js";import{b as B,a as N}from"./url-ac45a5a7.js";const P=I("useBiliBiliStore",()=>{async function c(s){try{const{data:i}=await d.post(B.list,s);return!!i.success}catch{return!1}}async function a(s){try{const{data:i}=await d.post(B.video,s);return!!i.success}catch{return!1}}return{bilibiliListSaveToNotion:c,bilibiliVideoSaveToNotion:a}}),L={class:"flex min-h-[100vh] items-center justify-center"},k=["onSubmit"],j=u("p",{class:"mb-5 text-center"},"BiliBili 播放清單網址(需有 /?p=)",-1),C={class:"mb-10 flex items-center justify-center gap-x-3"},A={__name:"BiliBiliList",setup(c){const a=N(),s=P(),{bilibiliListSaveToNotion:i}=s,l=b(!1),t=b(0),e=U({mainPageId:"",bilibiliUrl:""});function S(){e.mainPageId="",e.bilibiliUrl=""}function g(){return e.mainPageId===""?(a.toastSimple("error","請輸入 Notion API 頁面 ID"),!1):e.bilibiliUrl===""?(a.toastSimple("error","請輸入 BiliBili 播放清單網址"),!1):!e.bilibiliUrl.includes("https://www.bilibili.com/video/")&&!e.bilibiliUrl.includes("?p=")?(a.toastSimple("error","請輸入正確的 BiliBili 播放清單網址"),!1):!0}async function _(){if(!g())return;t.value=0,l.value=!0,await i(e)?t.value=1:t.value=2,l.value=!1,e.bilibiliUrl=""}return(x,r)=>(m(),f("div",L,[u("form",{onSubmit:h(_,["prevent"])},[o(p,{label:"notion API 頁面 ID",classLabel:"mr-3",class:"mb-5 ml-2",modelValue:e.mainPageId,"onUpdate:modelValue":r[0]||(r[0]=n=>e.mainPageId=n),disabled:l.value},null,8,["modelValue","disabled"]),o(p,{label:"BiliBili 播放清單網址",classLabel:"mr-3",modelValue:e.bilibiliUrl,"onUpdate:modelValue":r[1]||(r[1]=n=>e.bilibiliUrl=n),disabled:l.value,class:"mb-2"},null,8,["modelValue","disabled"]),j,u("div",C,[o(v,{text:"清除",class:"btn bg-slate-200",onClick:S,disabled:l.value},null,8,["disabled"]),o(v,{text:"送出",class:"btn bg-teal-700 text-white",type:"submit",loading:l.value,disabled:l.value},null,8,["loading","disabled"])]),t.value?(m(),f("p",{key:0,class:w(["text-center",{"text-red-200":t.value===2}])}," 加入"+y(t.value==1?"成功":"失敗"),3)):V("",!0)],40,k)]))}};export{A as default};
