import{h as S,i as g,j as u,k as I,o as d,c,b as m,e as r,I as h,B as f,n as x,t as _,l as U,m as V}from"./index-57565b74.js";import{u as y}from"./swal-3391c335.js";const P=S("useHahowStore",()=>{async function i(s){try{const{data:l}=await g.post("/hahow",s);return!!l.success}catch{return!1}}return{hahowSaveToNotion:i}}),N={class:"flex min-h-[100vh] items-center justify-center"},k=["onSubmit"],B={class:"mb-10 flex items-center justify-center gap-x-3"},C={__name:"Hahow",setup(i){const s=y(),{hahowSaveToNotion:l}=P(),a=u(!1),t=u(0),e=I({mainPageId:"",hahowUrl:""});function b(){e.mainPageId="",e.hahowUrl=""}function w(){return e.mainPageId===""?(s.toastSimple("error","請輸入 Notion API 頁面 ID"),!1):e.hahowUrl===""?(s.toastSimple("error","請輸入 hahow 課程網址"),!1):e.hahowUrl.includes("https://hahow.in/courses/")?!0:(s.toastSimple("error","請輸入正確的 hahow 課程網址"),!1)}async function p(){if(!w())return;t.value=0,a.value=!0,await l(e)?t.value=1:t.value=2,a.value=!1,e.hahowUrl=""}return(v,o)=>(d(),c("div",N,[m("form",{onSubmit:V(p,["prevent"])},[r(h,{label:"notion API 頁面 ID",classLabel:"mr-3",class:"mb-5",modelValue:e.mainPageId,"onUpdate:modelValue":o[0]||(o[0]=n=>e.mainPageId=n),disabled:a.value},null,8,["modelValue","disabled"]),r(h,{label:"hahow 課程網址",classLabel:"mr-3",class:"mb-5 ml-4",modelValue:e.hahowUrl,"onUpdate:modelValue":o[1]||(o[1]=n=>e.hahowUrl=n),disabled:a.value},null,8,["modelValue","disabled"]),m("div",B,[r(f,{text:"清除",class:"btn bg-slate-200",onClick:b,disabled:a.value},null,8,["disabled"]),r(f,{text:"送出",class:"btn bg-teal-700 text-white",type:"submit",loading:a.value,disabled:a.value},null,8,["loading","disabled"])]),t.value?(d(),c("p",{key:0,class:x(["text-center",{"text-red-200":t.value===2}])}," 加入"+_(t.value==1?"成功":"失敗"),3)):U("",!0)],40,k)]))}};export{C as default};
