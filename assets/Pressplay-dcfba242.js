import{h as I,i as x,j as u,k as P,o as p,c as d,b as c,e as o,I as m,B as f,n as _,t as w,l as U,m as V}from"./index-28f4c1a4.js";import{u as h}from"./swal-1f66486e.js";const N=I("usePressplayStore",()=>{async function i(l){try{const{data:t}=await x.post("/pressplay",l);return!!t.success}catch{return!1}}return{pressplaySaveToNotion:i}}),k={class:"flex min-h-[100vh] items-center justify-center"},B=["onSubmit"],j={class:"mb-10 flex items-center justify-center gap-x-3"},L={__name:"Pressplay",setup(i){const l=h(),t=N(),{pressplaySaveToNotion:y}=t,s=u(!1),a=u(0),e=P({mainPageId:"",pressplayUrl:""});function b(){e.mainPageId="",e.pressplayUrl=""}function v(){return e.mainPageId===""?(l.toastSimple("error","請輸入 Notion API 頁面 ID"),!1):e.courseUrl===""?(l.toastSimple("error","請輸入 pressplay 課程網址"),!1):e.pressplayUrl.includes("https://www.pressplay.cc/project/")?!0:(l.toastSimple("error","請輸入正確的 pressplay 課程網址"),!1)}async function S(){if(!v())return;a.value=0,s.value=!0,await y(e)?a.value=1:a.value=2,s.value=!1,e.pressplayUrl=""}return(g,r)=>(p(),d("div",k,[c("form",{onSubmit:V(S,["prevent"])},[o(m,{label:"notion API 頁面 ID",classLabel:"mr-3",class:"mb-5 ml-1",modelValue:e.mainPageId,"onUpdate:modelValue":r[0]||(r[0]=n=>e.mainPageId=n),disabled:s.value},null,8,["modelValue","disabled"]),o(m,{label:"pressplay 課程網址",classLabel:"mr-3",class:"mb-5",modelValue:e.pressplayUrl,"onUpdate:modelValue":r[1]||(r[1]=n=>e.pressplayUrl=n),disabled:s.value},null,8,["modelValue","disabled"]),c("div",j,[o(f,{text:"清除",class:"btn bg-slate-200",onClick:b,disabled:s.value},null,8,["disabled"]),o(f,{text:"送出",class:"btn bg-teal-700 text-white",type:"submit",loading:s.value,disabled:s.value},null,8,["loading","disabled"])]),a.value?(p(),d("p",{key:0,class:_(["text-center",{"text-red-200":a.value===2}])}," 加入"+w(a.value==1?"成功":"失敗"),3)):U("",!0)],40,B)]))}};export{L as default};
