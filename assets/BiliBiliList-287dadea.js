import{h as _,i as x,j as d,k as I,o as b,c,b as n,e as r,I as m,B as f,n as U,t as w,l as V,m as h}from"./index-81a8f7aa.js";import{u as y}from"./swal-91bb9a73.js";const L=_("useBiliBiliStore",()=>{async function u(t){try{const{data:a}=await x.post("/bilibiliList",t);return!!a.success}catch{return!1}}return{bilibiliListSaveToNotion:u}}),P={class:"flex min-h-[100vh] items-center justify-center"},N=["onSubmit"],k=n("p",{class:"mb-5 text-center"},"BiliBili 播放清單網址(需有 /?p=)",-1),j={class:"mb-10 flex items-center justify-center gap-x-3"},A={__name:"BiliBiliList",setup(u){const t=y(),a=L(),{bilibiliListSaveToNotion:p}=a,i=d(!1),l=d(0),e=I({mainPageId:"",bilibiliUrl:""});function v(){e.mainPageId="",e.bilibiliUrl=""}function B(){return e.mainPageId===""?(t.toastSimple("error","請輸入 Notion API 頁面 ID"),!1):e.bilibiliUrl===""?(t.toastSimple("error","請輸入 BiliBili 播放清單網址"),!1):!e.bilibiliUrl.includes("https://www.bilibili.com/video/")&&!e.bilibiliUrl.includes("?p=")?(t.toastSimple("error","請輸入正確的 BiliBili 播放清單網址"),!1):!0}async function S(){if(!B())return;l.value=0,i.value=!0,await p(e)?l.value=1:l.value=2,i.value=!1,e.bilibiliUrl=""}return(g,s)=>(b(),c("div",P,[n("form",{onSubmit:h(S,["prevent"])},[r(m,{label:"notion API 頁面 ID",classLabel:"mr-3",class:"mb-5 ml-2",modelValue:e.mainPageId,"onUpdate:modelValue":s[0]||(s[0]=o=>e.mainPageId=o),disabled:i.value},null,8,["modelValue","disabled"]),r(m,{label:"BiliBili 播放清單網址",classLabel:"mr-3",modelValue:e.bilibiliUrl,"onUpdate:modelValue":s[1]||(s[1]=o=>e.bilibiliUrl=o),disabled:i.value,class:"mb-2"},null,8,["modelValue","disabled"]),k,n("div",j,[r(f,{text:"清除",class:"btn bg-slate-200",onClick:v,disabled:i.value},null,8,["disabled"]),r(f,{text:"送出",class:"btn bg-teal-700 text-white",type:"submit",loading:i.value,disabled:i.value},null,8,["loading","disabled"])]),l.value?(b(),c("p",{key:0,class:U(["text-center",{"text-red-200":l.value===2}])}," 加入"+w(l.value==1?"成功":"失敗"),3)):V("",!0)],40,N)]))}};export{A as default};
